@page "/ServerPaging"

@using System.Net.Http.Json
@using MudBlazorTemplates.WebHelper.Model
@inject HttpClient httpClient


<PageTitle>Server Pagination</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Mud Table Pagination</MudText>
<MudText Class="mb-8">Mud Table Pagination 
    <MudLink
        Href="https://mudblazor.com/components/table#server-side-filtering,-sorting-and-pagination">
        MudTable Pagination
    </MudLink> 
</MudText>


<MudTable ServerData="@(new Func<TableState, Task<TableData<User>>>(ServerReload))"
          Dense="true" Hover="true" @ref="table">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Periodic Elements</MudText>
        <MudSpacer />
        <MudTextField T="string" ValueChanged="@(s=>OnSearch(s))" Placeholder="Search" Adornment="Adornment.Start"
                      AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
    </ToolBarContent>
    <HeaderContent>
        <MudTh><MudTableSortLabel SortLabel="id" T="User">Nr</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="email" T="User">Email</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="name" T="User">Name</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="status" T="User">Status</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="Gender" T="User">Gender</MudTableSortLabel></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Nr">@context.Id</MudTd>
        <MudTd DataLabel="Email">@context.Email</MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Status">@context.Status</MudTd>
        <MudTd DataLabel="Gender">@context.Gender</MudTd>
    </RowTemplate>
    <NoRecordsContent>
        <MudText>No matching records found</MudText>
    </NoRecordsContent>
    <LoadingContent>
        <MudText>Loading...</MudText>
    </LoadingContent>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>



@* <MudExpansionPanels Style="flex:1"> *@
@*     <MudExpansionPanel Text="Show Events"> *@
@*         @foreach (var message in _events) *@
@*         { *@
@*             <MudText Typo="@Typo.body2">@message</MudText> *@
@*         } *@
@*         @if(_events.Count > 0)  *@
@*         { *@
@*             <div class="d-flex"> *@
@*                 <MudSpacer/> *@
@*                 <MudButton Class="mt-3" ButtonType="ButtonType.Button" Variant="Variant.Filled" OnClick="@(() => _events.Clear())">Clear</MudButton> *@
@*             </div> *@
@*         } *@
@*     </MudExpansionPanel> *@
@* </MudExpansionPanels> *@


@* *@
@* <MudTable Elevation="25" Items="GetCustomers()"  *@
@*           Filter="new Func<Customer, bool>(Search)"  *@
@*           @bind-customer="customer"> *@
@*     <ToolBarContent> *@
@*         <MudText Typo="Typo.h6">Customers</MudText> *@
@*         <MudToolBarSpacer /> *@
@*         <MudTextField @bind-Value="searchString" Placeholder="Search for Customers..."  *@
@*                       Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search"  *@
@*                       IconSize="Size.Medium" Class="mt-0"></MudTextField> *@
@*     </ToolBarContent> *@
@*     <HeaderContent> *@
@*         <MudTh>First Name</MudTh> *@
@*         <MudTh>Last Name</MudTh> *@
@*         <MudTh>Phone Number</MudTh> *@
@*         <MudTh>Actions</MudTh> *@
@*     </HeaderContent> *@
@*     <RowTemplate> *@
@*         <MudTd DataLabel="Id">@context.number</MudTd> *@
@*         <MudTd DataLabel="Group">@context.group</MudTd> *@
@*         <MudTd DataLabel="Name">@context.name</MudTd> *@
@*         <MudTd DataLabel="Molar">@context.molar</MudTd> *@
@*         <MudTd DataLabel=""> *@
@*             <MudFab @onclick="@(()=>Edit(@context.number))" Color="Color.Primary"  *@
@*                     Icon="@Icons.Material.Filled.Edit" Size="Size.Small"  *@
@*                     IconSize="Size.Small" /> *@
@*             <MudFab @onclick="@(()=>Delete(@context.number))" Color="Color.Secondary"  *@
@*                     Icon="@Icons.Material.Filled.Delete" Size="Size.Small"  *@
@*                     IconSize="Size.Small" /> *@
@*         </MudTd> *@
@*     </RowTemplate> *@
@* </MudTable> *@